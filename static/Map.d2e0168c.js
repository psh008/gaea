import{d as y,r as b,b9 as g,ab as v,o as w,n as S,b3 as C,O as E,a as z,c as _,b as T,H as c}from"./entry.81c3309d.js";const k={class:"w-full h-full min-h-[250px] bg-[#0F0F0F] rounded-lg shadow-3d"},x=["id"],L=y({__name:"Map",props:{id:{default:"echartMap"},data:{default:[]}},setup(u){const a=u,{$worldData:f}=c(),p=f,{$eChart:n}=c(),l=b(null);n.registerMap("world",p);const e=g();v(()=>a.data,()=>{i()},{deep:!0});const i=async()=>{e.value!=null&&e.value.dispose();const t=document.getElementById(a.id);if(!t||t.clientWidth===0||t.clientHeight===0){console.error("Chart container has no width or height");return}e.value=n.init(t),window.addEventListener("resize",()=>{e.value&&(clearTimeout(l.value),l.value=setTimeout(()=>{e.value.resize()},500))});const s=[],r=[],d=[];a.data&&a.data.forEach(o=>{r.find(m=>o.country===m.name)||r.push({name:o.country,itemStyle:{areaColor:"#866c50",borderColor:"#d9af80"}}),s.push({coords:[[o.longitude,o.latitude],[103.51,1.16]]}),d.push({value:[o.longitude,o.latitude]})}),console.log(r,"regionsData");let h={geo:{type:"map",map:"world",zoom:1.2,roam:!0,scaleLimit:{min:1.2,max:3},itemStyle:{areaColor:"rgba(51, 51, 51,1)",borderColor:"rgba(51, 51, 51,1)",borderType:"dotted"},emphasis:{itemStyle:{areaColor:"#866c50"},label:{show:!1,color:"#fff"}},regions:r},series:[{type:"lines",zlevel:2,effect:{color:"#d9af80",show:!0,period:2,trailLength:.4,symbol:"pin",symbolSize:8},lineStyle:{width:1,opacity:1,curveness:.5,color:"rgba(255, 255, 255, 0.4)"},data:s},{type:"effectScatter",coordinateSystem:"geo",showEffectOn:"render",symbolSize:8,rippleEffect:{number:4,period:4,scale:3,brushType:"stroke"},itemStyle:{color:"#d9af80"},data:[{value:a.data.length>0?[103.51,1.16]:[]}]},{type:"effectScatter",coordinateSystem:"geo",showEffectOn:"render",symbolSize:8,rippleEffect:{number:4,period:4,scale:3,brushType:"stroke"},itemStyle:{color:"#d9af80"},data:d}]};setTimeout(()=>{e.value.setOption(h)},0)};return w(async()=>{await S(),i()}),C(()=>{window.removeEventListener("resize",e.value.resize())}),E(()=>{e.value&&e.value.dispose()}),(t,s)=>(z(),_("div",k,[T("div",{id:t.$props.id,class:"w-full h-full"},null,8,x)]))}});export{L as default};
